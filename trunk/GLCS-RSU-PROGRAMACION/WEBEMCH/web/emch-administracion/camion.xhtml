<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Administrar Camiones</title>
    </h:head>
    <h:body>
        <h:form>
            <ui:composition template="../plantillas/Template.xhtml">

                <ui:define name="usuarios">
                </ui:define>

                <ui:define name="top">

                </ui:define>

                <ui:define name="content">

                    <h:form id="btnAgregar">
                        <p:commandButton value="Nuevo" oncomplete="nuevoCamionDialog.show();" update=":formCamionNuevo" icon="ui-icon-document" actionListener="#{camionBean.prepararInsertar()}"/>
                    </h:form>
                    <h:form id="btnAsignar">
                        <p:commandButton value="Asignar Chofer" icon="ui-icon-plus" action="#{camionBean.asignar}"/>
                    </h:form>
                    <br/>
                    <h:form id="formCamiones">
                        <p:dataTable id="dtCamiones" var="camion" value="#{camionBean.listaCamiones}" rowKey="#{camion.cdCamion}" selection="#{trabajadorXCamionBean.selectCamion}" selectionMode="single">
                            <h:inputHidden value="#{camion.cdCamion}"/>

                            <p:column headerText="Placa">
                                <h:outputText value="#{camion.placa}" />
                            </p:column>

                            <p:column headerText="Modelo">
                                <h:outputText value="#{camion.modelo}" />
                            </p:column>

                            <p:column headerText="Año">
                                <h:outputText value="#{camion.anio}" />
                            </p:column>

                            <p:column headerText="Tipo Combustible">
                                <h:outputText value="#{camion.tipoCombustible}" />
                            </p:column>

                            <p:column headerText="Kilometraje">
                                <h:outputText value="#{camion.kilometraje}" />
                            </p:column>

                            <p:column headerText="Estado">
                                <h:outputText value="#{camion.estado == true ? 'Habilitado' : 'Deshabilitado'}" />
                            </p:column>

                            <p:column headerText="Edit." style="width:8%; text-align: center">  
                                <p:commandButton oncomplete="editarCamionDialog.show();" icon="ui-icon-pencil" title="Editar" update=":formCamionEditar" actionListener="#{camionBean.prepararCamion(camion.cdCamion)}"/>
                            </p:column> 
                            <p:column headerText="Ver." style="width:8%; text-align: center"> 
                                <p:commandButton oncomplete="verCamionDialog.show();" icon="ui-icon-search" title="Ver" update=":formCamionVer" actionListener="#{camionBean.prepararCamion(camion.cdCamion)}"/>
                            </p:column> 
                            <p:column headerText="Hab./Des." style="width:8%; text-align: center"> 
                                <p:commandButton  icon="#{camion.estado == true ? 'ui-icon-check' : 'ui-icon-pencil'}" title="Cambiar estado" update=":formCamiones" actionListener="#{camionBean.cambiarEstado(camion.cdCamion)}"/>
                            </p:column> 

                        </p:dataTable>
                    </h:form>

                    <h:form id="formCamionEditar">
                        <p:dialog id="dlgCamionEditar" header="Editar Camión" widgetVar="editarCamionDialog" resizable="false" modal="false">
                            <h:panelGrid id="pgCamionEditar" columns="2" cellpadding="4" style="margin:0 auto;">
                                <h:outputText value="Codigo" />
                                <p:inputText value="#{camionBean.camion.cdCamion}" style="font-weight:bold" disabled="true"/>

                                <h:outputText value="Placa:" />
                                <p:inputText value="#{camionBean.camion.placa}" style="font-weight:bold"/>

                                <h:outputText value="Modelo:" />
                                <p:inputText value="#{camionBean.camion.modelo}" style="font-weight:bold"/>

                                <h:outputText value="Marca:" />
                                <p:inputText value="#{camionBean.camion.marca}" style="font-weight:bold"/>

                                <h:outputText value="Año:" />
                                <p:inputText value="#{camionBean.camion.anio}" style="font-weight:bold"/>

                                <h:outputText value="Peso bruto:" />
                                <p:inputText value="#{camionBean.camion.pesoBruto}" style="font-weight:bold"/>

                                <h:outputText value="Tipo de combustible:" />
                                <p:inputText value="#{camionBean.camion.tipoCombustible}" style="font-weight:bold"/>

                                <h:outputText value="Direccion:" />
                                <p:inputText value="#{camionBean.camion.direccion}" style="font-weight:bold"/>

                                <h:outputText value="Caja de cambios:" />
                                <p:inputText value="#{camionBean.camion.cajaCambios}" style="font-weight:bold"/>

                                <h:outputText value="Velocidad máxima:" />
                                <p:inputText value="#{camionBean.camion.velocMax}" style="font-weight:bold"/>

                                <h:outputText value="Kilometraje:" />
                                <p:inputText value="#{camionBean.camion.kilometraje}" style="font-weight:bold"/>
                            </h:panelGrid>

                            <p:separator/>

                            <p:commandButton value="Guardar" oncomplete="editarCamionDialog.hide()" update=":formCamiones" actionListener="#{camionBean.actualizarCamion()}"/>
                            <p:commandButton value="Cancelar" oncomplete="editarCamionDialog.hide()"/>
                        </p:dialog>
                    </h:form>

                    <h:form id="formCamionVer">
                        <p:dialog id="dlgCamionVer" header="Detalle del Camión" widgetVar="verCamionDialog" resizable="false" modal="false">
                            <h:panelGrid id="pgCamionVer" columns="2" cellpadding="4" style="margin:0 auto;">
                                <h:outputText value="Codigo" />
                                <h:outputText value="#{camionBean.camion.cdCamion}"/>

                                <h:outputText value="Placa:" />
                                <h:outputText value="#{camionBean.camion.placa}"/>

                                <h:outputText value="Modelo:" />
                                <h:outputText value="#{camionBean.camion.modelo}"/>

                                <h:outputText value="Marca:" />
                                <h:outputText value="#{camionBean.camion.marca}"/>

                                <h:outputText value="Año:" />
                                <h:outputText value="#{camionBean.camion.anio}"/>

                                <h:outputText value="Peso Bruto:" />
                                <h:outputText value="#{camionBean.camion.pesoBruto}"/>

                                <h:outputText value="Tipo Combustible:" />
                                <h:outputText value="#{camionBean.camion.tipoCombustible}"/>

                                <h:outputText value="Dirección:" />
                                <h:outputText value="#{camionBean.camion.direccion}"/>

                                <h:outputText value="Caja de cambios:" />
                                <h:outputText value="#{camionBean.camion.cajaCambios}"/>

                                <h:outputText value="Velocidad Máxima:" />
                                <h:outputText value="#{camionBean.camion.velocMax}"/>

                                <h:outputText value="Kilometraje:" />
                                <h:outputText value="#{camionBean.camion.kilometraje}"/>

                                <h:outputText value="Estado:" />
                                <h:outputText value="#{camionBean.camion.estado == true ? 'Habilitado' : 'Deshabilitado'}"/>
                            </h:panelGrid>

                            <p:separator/>

                            <p:commandButton value="OK" oncomplete="verCamionDialog.hide()"/>
                        </p:dialog>
                    </h:form>

                    <h:form id="formCamionNuevo">
                        <p:dialog id="nuevoCamionDialog" header="Nuevo Camión" widgetVar="nuevoCamionDialog" resizable="false" modal="false">
                            <h:panelGrid id="pgCamionNuevo" columns="2" cellpadding="4" style="margin:0 auto;">
                                <h:outputText value="Placa:" />
                                <h:inputText value="#{camionBean.camion.placa}"/>

                                <h:outputText value="Modelo:" />
                                <h:inputText value="#{camionBean.camion.modelo}"/>

                                <h:outputText value="Marca:" />
                                <h:inputText value="#{camionBean.camion.marca}"/>

                                <h:outputText value="Año:" />
                                <h:inputText value="#{camionBean.camion.anio}"/>

                                <h:outputText value="Peso Bruto:" />
                                <h:inputText value="#{camionBean.camion.pesoBruto}"/>

                                <h:outputText value="Tipo Combustible:" />
                                <h:inputText value="#{camionBean.camion.tipoCombustible}"/>

                                <h:outputText value="Dirección:" />
                                <h:inputText value="#{camionBean.camion.direccion}"/>

                                <h:outputText value="Caja de cambios:" />
                                <h:inputText value="#{camionBean.camion.cajaCambios}"/>

                                <h:outputText value="Velocidad Máxima:" />
                                <h:inputText value="#{camionBean.camion.velocMax}"/>

                                <h:outputText value="Kilometraje:" />
                                <h:inputText value="#{camionBean.camion.kilometraje}"/>
                            </h:panelGrid>

                            <p:separator/>

                            <p:commandButton value="Guardar" oncomplete="nuevoCamionDialog.hide()" update=":formCamiones:dtCamiones,:formmessages" actionListener="#{camionBean.insertar()}"/>
                            <p:commandButton value="Cancelar" update=":formCamiones:dtCamiones" oncomplete="nuevoCamionDialog.hide()"/>
                        </p:dialog>
                    </h:form>

                    <h:form id="formmessages">
                        <p:messages showDetail="true"/>
                    </h:form>
                </ui:define>

                <ui:define name="bottom">
                </ui:define>

            </ui:composition>
        </h:form>
    </h:body>
</html>

